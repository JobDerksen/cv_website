import React, {useEffect, useRef, useState} from "react";
import Head from "next/head";
import styles from '@/styles/projects.module.scss'
import ScrollHandler from "@/components/ScrollHandler/ScrollHandler";
import ParticlesComp from "@/particles/Particles";
const Projects = () => {
    const aboutRef = useRef<HTMLDivElement>(null);
    const gradientRef = useRef<HTMLDivElement>(null);

    const [contentHeightBanner, setContentHeightBanner] = useState<number | undefined>(0);
    const heroSizeRef = useRef<HTMLDivElement>(null);

    useEffect(() => {
        const observer = new ResizeObserver((entries) => {
            setContentHeightBanner(entries[0].contentRect.height);
        });
        if (heroSizeRef.current) {
            observer.observe(heroSizeRef.current);
        }
        return () => {
            if (heroSizeRef.current) {

                observer.unobserve(heroSizeRef.current);
            }
        };
    }, []);
    return(
        <div className={styles.container} id='#portfolio'>
            <Head>
                <title>Job Derksen</title>
                <meta name="description" content="Generated by create next app"/>
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
                <link rel="icon" href="/favicon.ico"/>
            </Head>
            <div style={{height: contentHeightBanner, overflow: 'hidden'}}>
                <div ref={gradientRef} className={styles.gradient}>
                    <section className={styles.hero} ref={heroSizeRef}>
                        <h1 ref={aboutRef} className={styles.pageTitle}>PORTFOLIO</h1>
                        <div style={{height: contentHeightBanner}} className={styles.particleContainer}>
                            <ParticlesComp/>
                        </div>
                    </section>
                </div>
            </div>

            <div>
                My projects
                {/*https://www.energyvoice.com/oilandgas/north-sea/188096/aberdeen-school-scoops-top-oil-and-gas-challenge/*/}
                {/*https://www.agcc.co.uk/news-article/aberdeen-grammar-school-wins-top-prize-at-final-of-techfests-stem-in-the-pipeline-oil-and-gas-challenge*/}

            </div>
            <ScrollHandler
                className={styles.pageTitle_scroll}
                elementRef={aboutRef}
                initialScrollMultiplier={2}
                endScrollMultiplier={2.501}
            />

            <ScrollHandler
                className={styles.gradient_after}
                elementRef={gradientRef}
                initialScrollMultiplier={2}
                endScrollMultiplier={20}
            />
        </div>
    )
}
export default Projects;
